(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cate-venues-detail"],{"0493":function(t,e,n){"use strict";n.r(e);var i=n("e761"),s=n("1ffd");for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("c11b");var o,c=n("f0c5"),u=Object(c["a"])(s["default"],i["b"],i["c"],!1,null,"8cf37e2e",null,!1,i["a"],o);e["default"]=u.exports},"1ffd":function(t,e,n){"use strict";n.r(e);var i=n("4f7e"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a},"4f7e":function(t,e,n){"use strict";n("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{nowIndex:0,id:"",is_show:!0,content:{seatSetting:{registrationTime:[],time:[]}},venuesList:[],canBooking:!0,comment_show:!1,commentList:[],page:0,isFabulous:!1,is_keep:!1,shareList:[{type:1,icon:"/static/share_wechat.png",text:"微信好友"},{type:2,icon:"/static/share_moment.png",text:"朋友圈"},{type:3,icon:"/static/share_qq.png",text:"QQ好友"},{type:4,icon:"/static/share_qqzone.png",text:"QQ空间"}],channelId:""}},onLoad:function(t){var e=this;this.id=t.id,this.channelId=t.channelId,this.getDetail(),this.getVenuesList(),this.getCommentList();var n=uni.getStorageSync("fabulous"+this.id);n&&(this.isFabulous=!0),this.isLogin&&(this.homeRequest({url:"/view",method:"GET",data:{}}),this.homeRequest({url:"/content/collectExit",method:"GET",data:{cId:this.id}}).then((function(t){"true"==t.body?e.is_keep=!0:e.is_keep=!1})))},methods:{refresh:function(){console.log("刷新"),this.page=0,this.commentList=[],this.getCommentList()},loadMore:function(){console.log("上拉加载"),this.page+=10,this.getCommentList()},close:function(){this.comment_show=!1},share:function(){this.$refs.share.toggleMask()},getCommentList:function(){var t=this,e={contentId:this.id,checked:1,first:this.page,count:10};this.indexRequest({url:"/comment/list.jspx",data:e}).then((function(e){var n=e.data.body;t.commentList=t.commentList.concat(n)}))},indexChange:function(t){this.nowIndex=t.detail.current},getDetail:function(){var t=this,e={format:0};179==this.channelId?e.contentId=this.id:e.id=this.id;var n=179==this.channelId?"/bookings/content":(this.channelId,"/content/get.jspx");this.indexRequest({url:n,data:e}).then((function(e){var n=e.data.body;if(n.txt=t.replaceSpecialChar(n.txt),t.content=n,198==t.channelId){var i=(new Date).getTime(),s=new Date(n.seatSetting.registrationTime[1]).getTime();i>s&&(t.canBooking=!1)}uni.setNavigationBarTitle({title:n.title})}))},bookings:function(){var t=this;this.isLogin?uni.getStorageSync("user_info").isCertification?179==this.channelId?this.homeRequest({url:"/bookings/check_group",method:"GET"}).then((function(e){console.log(e),200==e.code?uni.navigateTo({url:"./venues-booking?id="+t.id+"&&channelId="+t.channelId}):t.toast(e.message,"none",1500)})):uni.navigateTo({url:"./venues-booking?id="+this.id+"&&channelId="+this.channelId}):this.toast("您还没有实名认证，请先实名认证！","none"):uni.showModal({title:"提示",content:"您还没有登录，无法预定，确定先登录吗？",success:function(t){t.confirm?uni.navigateTo({url:"/pages/login/login?is_thing=true"}):t.cancel}})},getVenuesList:function(){var t=this,e={count:4,channelIds:this.channelId,sort:4};this.indexRequest({url:"/content/list.jspx",data:e}).then((function(e){console.log(e);var n=e.data.body;t.venuesList=n}))},openMap:function(t){var e=this.bMapToQQMap(t.position.lng,t.position.lat);uni.openLocation({latitude:e.lat,longitude:e.lng,name:t.title,address:t.attr_address})},todetail:function(t){uni.redirectTo({url:"/pages/cate/venues-detail?id="+t+"&&channelId"+this.channelId})},btnFabulous:function(){var t=this;this.isFabulous?this.indexRequest({url:"/content/down",data:{contentId:this.id}}).then((function(e){200==e.data.code&&(t.isFabulous=!1,uni.removeStorageSync("fabulous"+t.id),t.toast("取消点赞成功！"))})):this.indexRequest({url:"/content/up",data:{contentId:this.id}}).then((function(e){200==e.data.code&&(t.isFabulous=!0,uni.setStorageSync("fabulous"+t.id,!0),t.toast("点赞成功！"))}))},collection:function(){var t=this;this.isLogin?this.homeRequest({url:"/content/collect",method:"GET",data:{id:this.id,operate:this.is_keep?0:1}}).then((function(e){200==e.code&&(t.is_keep?t.toast("取消收藏成功！"):t.toast("收藏成功！"),t.is_keep=!t.is_keep)})):uni.showModal({title:"提示",content:"您还未登录，确定先登录吗？",showCancel:!0,confirmText:"确定",success:function(t){t.confirm?uni.navigateTo({url:"/pages/login/login?is_thing="+!0}):t.cancel}})}}};e.default=i},c11b:function(t,e,n){"use strict";var i=n("cf59"),s=n.n(i);s.a},cf59:function(t,e,n){var i=n("e1e6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n("4f06").default;s("3cb540dc",i,!0,{sourceMap:!1,shadowMode:!1})},e1e6:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-8cf37e2e]{background-color:#fff}.venues-detail[data-v-8cf37e2e]{width:100%;overflow:auto;box-sizing:border-box}.venues-detail .venues_box[data-v-8cf37e2e]{margin-top:%?20?%;width:100%;box-sizing:border-box;padding:0 %?30?%}.venues-detail .venues_box .venues_title[data-v-8cf37e2e]{width:100%;font-size:%?36?%;line-height:%?60?%;font-weight:bolder;color:#1b1c1e;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.venues-detail .venues_box .venues_info[data-v-8cf37e2e]{font-size:%?32?%;font-weight:400;line-height:%?64?%;color:#1b1c1e;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.venues-detail .venues_box .venues_info_name[data-v-8cf37e2e]{color:#666}.venues-detail .venues_box .venues_info .address[data-v-8cf37e2e]{max-width:calc(100% - %?218?%);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.venues-detail .venues_box .venues_info .address_btn[data-v-8cf37e2e]{width:%?108?%;height:%?38?%;margin-left:%?10?%;border:%?2?% solid #5d4ade;border-radius:%?8?%;text-align:center;line-height:%?38?%;color:#614ddf;font-size:%?22?%}.venues-detail .venues_box .venues_infos[data-v-8cf37e2e]{font-size:%?32?%;font-weight:400;line-height:%?64?%;color:#666}.venues-detail .venues_box .venues_infos uni-text[data-v-8cf37e2e]{color:#1b1c1e}.venues-detail .introduce[data-v-8cf37e2e]{width:100%;box-sizing:border-box;padding:%?30?% 0;line-height:%?40?%;font-size:%?28?%;color:#8b8b9c}.venues-detail .introduce .more[data-v-8cf37e2e]{font-size:%?24?%;line-height:%?40?%;color:#7666e3;margin-left:%?6?%}.dz_red[data-v-8cf37e2e]{color:#df1414}.gray[data-v-8cf37e2e]{background:#ccc!important}body.?%PAGE?%[data-v-8cf37e2e]{background-color:#fff}',""]),t.exports=e},e761:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={ysComment:n("eb7c").default,ysShare:n("4fab").default},s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"venues-detail content"},[n("v-uni-view",{staticClass:"main_img"},[n("v-uni-image",{staticClass:"indeximg",attrs:{src:t.content.titleImg,mode:"aspectFill"}})],1),n("v-uni-view",{staticClass:"venues_box",staticStyle:{"box-sizing":"border-box","padding-bottom":"20rpx"}},[n("v-uni-view",{staticClass:"venues_title"},[t._v(t._s(t.content.stitle))]),n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("类别：")]),n("v-uni-view",{staticClass:"venues_info_name"},[t._v(t._s(t.content.typeName?t.content.typeName:"暂无"))])],1),t.content.attr_address?n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("地址：")]),n("v-uni-view",{staticClass:"venues_info_name address"},[t._v(t._s(t.content.attr_address))]),t.content.position?n("v-uni-view",{staticClass:"address_btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openMap(t.content)}}},[t._v("查看地图")]):t._e()],1):t._e(),n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("电话：")]),n("v-uni-view",{staticClass:"venues_info_name"},[t._v(t._s(t.content.attr_phone?t.content.attr_phone:"暂无"))])],1),n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("面积：")]),n("v-uni-view",{staticClass:"venues_info_name"},[t._v(t._s(t.content.attr_area?t.content.attr_area:"暂无"))])],1),n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("容纳：")]),n("v-uni-view",{staticClass:"venues_info_name"},[t._v(t._s(t.content.attr_number?t.content.attr_number:"暂无"))])],1),198==t.channelId?n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("预定开始时间：")]),n("v-uni-view",{staticClass:"venues_info_name"},[t._v(t._s(t.content.seatSetting.registrationTime[0]))])],1):t._e(),198==t.channelId?n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("预定结束时间：")]),n("v-uni-view",{staticClass:"venues_info_name"},[t._v(t._s(t.content.seatSetting.registrationTime[1]))])],1):t._e(),198==t.channelId?n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("演出开始时间：")]),n("v-uni-view",{staticClass:"venues_info_name"},[t._v(t._s(t.content.seatSetting.time[0]))])],1):t._e(),198==t.channelId?n("v-uni-view",{staticClass:"venues_info"},[n("v-uni-view",{staticClass:"venues_info_title"},[t._v("演出结束时间：")]),n("v-uni-view",{staticClass:"venues_info_name"},[t._v(t._s(t.content.seatSetting.time[1]))])],1):t._e(),n("v-uni-view",{staticClass:"venues_infos"},[n("v-uni-text",[t._v("设备：")]),t._v(t._s(t.content.attr_equipment?t.content.attr_equipment:"暂无"))],1)],1),n("v-uni-view",{staticClass:"blank"}),n("v-uni-view",{staticClass:"tj_active"},[n("v-uni-view",{staticClass:"tj_active_title"},[t._v("简介")]),n("v-uni-view",{staticClass:"introduce"},[n("v-uni-rich-text",{attrs:{nodes:t.content.txt}})],1)],1),n("v-uni-view",{staticClass:"blank"}),n("v-uni-view",{staticClass:"tj_active"},[n("v-uni-view",{staticClass:"tj_active_title"},[t._v("相关推荐")]),n("v-uni-view",{staticClass:"tj_active_content"},t._l(t.venuesList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"tj_active_content_box",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.todetail(e.id)}}},[n("v-uni-view",{staticClass:"tj_active_content_box_img"},[n("v-uni-image",{attrs:{src:e.titleImg,mode:""}})],1),n("v-uni-view",{staticClass:"tj_active_content_box_title"},[t._v(t._s(e.title))])],1)})),1)],1),n("v-uni-view",{staticClass:"public_bottom"},[n("v-uni-view",{staticClass:"icon_area"},[n("v-uni-view",{staticClass:"icon_item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comment_show=!0}}},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/cate/pinglun.png",mode:""}}),n("v-uni-text",[t._v("评论")])],1),n("v-uni-button",{staticClass:"icon_item",attrs:{"hover-class":"none","open-type":"share"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.share.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:"/static/cate/zhuanfa.png",mode:""}}),n("v-uni-text",[t._v("转发")])],1),n("v-uni-view",{staticClass:"icon_item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.btnFabulous.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:t.isFabulous?"/static/cate/dianzan_red.png":"/static/cate/dianzan.png",mode:""}}),n("v-uni-text",{class:{dz_red:t.isFabulous}},[t._v("点赞")])],1),n("v-uni-view",{staticClass:"icon_item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.collection.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:t.is_keep?"/static/cate/shoucang_red.png":"/static/cate/shoucang.png",mode:""}}),n("v-uni-text",{class:{dz_red:t.is_keep}},[t._v("收藏")])],1)],1),179!=t.channelId&&180!=t.channelId&&198!=t.channelId||!t.canBooking?t._e():n("v-uni-view",{staticClass:"public_btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bookings.apply(void 0,arguments)}}},[t._v("马上预约")]),198!=t.channelId||t.canBooking?t._e():n("v-uni-view",{staticClass:"public_btn gray"},[t._v("已过预约时间")]),179!=t.channelId&&180!=t.channelId&&198!=t.channelId?n("v-uni-view",{staticClass:"public_btn gray"},[t._v("无需预约")]):t._e()],1),t.comment_show?n("ys-comment",{attrs:{ids:t.id,commentList:t.commentList},on:{refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.refresh.apply(void 0,arguments)},loadMore:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},close:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}):t._e(),n("ys-share",{ref:"share",attrs:{contentHeight:580,shareList:t.shareList}})],1)},a=[]}}]);