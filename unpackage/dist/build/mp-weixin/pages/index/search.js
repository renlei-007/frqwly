(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/search"],{"149d5":function(e,t,a){"use strict";a.r(t);var n=a("17d9"),s=a("b712");for(var i in s)"default"!==i&&function(e){a.d(t,e,(function(){return s[e]}))}(i);a("ad26");var c,o=a("f0c5"),r=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);t["default"]=r.exports},"17d9":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={zySearch:function(){return a.e("components/zy-search/zy-search").then(a.bind(null,"fad8"))},ysScroll:function(){return a.e("components/base/ys-scroll").then(a.bind(null,"c42f"))}},s=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"233a":function(e,t,a){},"73cf":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){a.e("components/zy-search/zy-search").then(function(){return resolve(a("fad8"))}.bind(null,a)).catch(a.oe)},s={components:{zySearch:n},data:function(){return{list:[],result:[],page:0,keywords:"",param:{scroll_y:!0,background:"#fff",refresher:!0,no_more_text:"没有更多了~",refresher_style:"black"},heights:45}},onShow:function(){var t=e.getStorageSync("search_cache");t&&(this.list=t)},methods:{refresh:function(){var e=this;console.log("刷新"),this.page=0,this.result=[],this.getList(),setTimeout((function(){e.$refs.scroll.endRefresh()}),800)},loadMore:function(){console.log("上拉加载"),this.page+=10,this.getList()},getList:function(){var t=this,a=e.createSelectorQuery().in(this),n=0;a.select("#zy-search").boundingClientRect((function(e){console.log(e),n=Math.ceil(e.height),t.heights=n})).exec();var s={q:this.keywords,count:10,first:this.page};this.indexRequest({url:"/content/search",data:s}).then((function(e){console.log(e),0==e.data.body.length&&0==t.result.length?t.$refs.scroll.setLoadStatus("no_data"):(t.result=t.result.concat(e.data.body),console.log(t.result),e.data.body.length<10?t.$refs.scroll.setLoadStatus("no_more"):t.$refs.scroll.setLoadStatus("more"))}))},doSearch:function(e){this.keywords=e,this.refresh()},navToDetailPage:function(e){switch(e.modelName){case"艺术欣赏":this.navigateTo("/pages/cate/art-expert?id="+e.id);break;case"旅游景点":this.navigateTo("/pages/cate/scenic-spot?id="+e.id+"&&channelIds="+e.channelId);break;case"新闻":this.navigateTo("/pages/cate/information-detail?id="+e.id+"&&channelIds="+e.channelId);break;case"非遗名录":this.navigateTo("/pages/cate/nonlegacy-detail?id="+e.id);break;case"直播":this.navigateTo("/pages/cate/live-detail?id="+e.id);break;case"志愿服务":this.navigateTo("/pages/cate/volunteers-detail?id="+e.id);break;case"活动预定":this.navigateTo("/pages/cate/active-detail?id="+e.id);break;case"培训":this.navigateTo("/pages/cate/nettrain-detail?id="+e.id);break;case"群组":this.navigateTo("/pages/cate/volunteers-detail?id="+e.id+"&&channelIds="+e.channelId);break;case"场馆预定":this.navigateTo("/pages/cate/venues-detail?id="+e.id+"&&channelIds="+e.channelId);break;case"课程":this.navigateTo("/pages/cate/mooc-detail?id="+e.id);break;case"文化百科":this.navigateTo("/pages/cate/cultural-encyclopedia-detail?id="+e.id);break}}}};t.default=s}).call(this,a("543d")["default"])},ad26:function(e,t,a){"use strict";var n=a("233a"),s=a.n(n);s.a},b712:function(e,t,a){"use strict";a.r(t);var n=a("73cf"),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},bb2d:function(e,t,a){"use strict";(function(e){a("41a1");n(a("66fd"));var t=n(a("149d5"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])}},[["bb2d","common/runtime","common/vendor"]]]);