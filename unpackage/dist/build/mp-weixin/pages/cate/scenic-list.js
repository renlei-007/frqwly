(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cate/scenic-list"],{"28bd":function(t,i,e){"use strict";var n=e("c2fa"),s=e.n(n);s.a},"2fd3":function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return c})),e.d(i,"a",(function(){return n}));var n={ysScroll:function(){return e.e("components/base/ys-scroll").then(e.bind(null,"c42f"))}},s=function(){var t=this,i=t.$createElement,e=(t._self._c,3==t.Index?t.__map(t.hsxpList,(function(i,e){var n=t.__get_orig(i),s=t.getLocation(i,0),c=t.getLocation(i,0);return{$orig:n,m0:s,m1:c}})):null),n=3==t.Index?t.__map(t.hsjyList,(function(i,e){var n=t.__get_orig(i),s=t.getLocation(i,1),c=t.getLocation(i,1);return{$orig:n,m2:s,m3:c}})):null,s=3==t.Index?t.__map(t.whdkyList,(function(i,e){var n=t.__get_orig(i),s=t.getLocation(i,3),c=t.getLocation(i,3);return{$orig:n,m4:s,m5:c}})):null,c=3==t.Index?t.__map(t.yxyList,(function(i,e){var n=t.__get_orig(i),s=t.getLocation(i,2),c=t.getLocation(i,2);return{$orig:n,m6:s,m7:c}})):null;t.$mp.data=Object.assign({},{$root:{l0:e,l1:n,l2:s,l3:c}})},c=[]},"82ab":function(t,i,e){"use strict";e.r(i);var n=e("2fd3"),s=e("8fd4");for(var c in s)"default"!==c&&function(t){e.d(i,t,(function(){return s[t]}))}(c);e("28bd");var a,o=e("f0c5"),r=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);i["default"]=r.exports},8366:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=c(e("a34a")),s=c(e("2b7b"));function c(t){return t&&t.__esModule?t:{default:t}}function a(t,i,e,n,s,c,a){try{var o=t[c](a),r=o.value}catch(u){return void e(u)}o.done?i(r):Promise.resolve(r).then(n,s)}function o(t){return function(){var i=this,e=arguments;return new Promise((function(n,s){var c=t.apply(i,e);function o(t){a(c,n,s,o,r,"next",t)}function r(t){a(c,n,s,o,r,"throw",t)}o(void 0)}))}}var r={data:function(){return{scenicList:[],lineList:[],scenicLeftList:[],scenicRightList:[],cutList:[{name:"吃",value:204},{name:"住",value:205},{name:"旅游公司",value:206}],param:{scroll_y:!0,background:"#F2F5FA",refresher:!0,no_more_text:"没有更多了~",refresher_style:"black"},first_cate_param:{scroll_y:!1,scroll_x:!0},page:0,Index:0,cutIndex:0,channelIds:207,scenicListCount:0,scenicLeftListHeight:0,scenicRightListHeight:0,hsxpList:s.default.hsxp.point,hsjyList:s.default.hsjy.point,yxyList:s.default.yxy.point,whdkyList:s.default.whdky.point,lineList1:[],lineList2:[],lineList3:[],lineList4:[],starsList:[],orderBy:9}},onLoad:function(i){var e;i.type&&(this.type=i.type),i.cutIndex&&(this.Index=i.cutIndex),this.channelIds=i.channelIds,1==this.Index?e="展览馆":2==this.Index?e="网红打卡":3==this.Index?e="精品路线":4==this.Index?(e="旅游服务",this.orderBy=25):5==this.Index&&(e="综合",this.channelIds="200,201,204,205,206"),t.setNavigationBarTitle({title:e}),4==this.Index&&(this.channelIds=204),3==this.Index?this.getLineList():this.getList()},methods:{getLocation:function(t,i){var e,n;e=690,0==i&&(n=286),1==i&&(n=336),2!=i&&3!=i||(n=358);var s=t.left/e*100,c=t.top/n*100;return[s,c]},refresh:function(){var t=this;console.log("刷新"),this.page=0,this.scenicLeftList=[],this.scenicRightList=[],this.scenicList=[],this.scenicListCount=0,this.scenicLeftListHeight=0,this.scenicRightListHeight=0,this.getList(),setTimeout((function(){t.$refs.scroll.endRefresh()}),800)},loadMore:function(){console.log("上拉加载"),this.page+=10,this.getList()},changeTab:function(t,i){this.channelIds=t.value,this.page=0,this.cutIndex=i,this.scenicLeftList=[],this.scenicRightList=[],this.scenicList=[],this.scenicListCount=0,this.scenicLeftListHeight=0,this.scenicRightListHeight=0,this.getList()},getList:function(){var t=this,i={channelIds:this.channelIds,first:this.page,count:10,format:0,orderBy:this.orderBy};this.indexRequest({url:"/content/list.jspx",data:i}).then((function(i){if(0==i.data.body.length&&0==t.scenicList.length)t.$refs.scroll.setLoadStatus("no_data");else{for(var e=0;e<i.data.body.length;e++)if(i.data.body[e].attr_start>0){i.data.body[e].starList=[];for(var n=0;n<Number(i.data.body[e].attr_start);n++)i.data.body[e].starList.push("")}t.scenicList=t.scenicList.concat(i.data.body),1!=t.Index&&i.data.body.length>0&&(t.scenicLeftListHeight>t.scenicRightListHeight?t.scenicRightList.push(i.data.body[0]):t.scenicLeftList.push(i.data.body[0])),i.data.body.length<10?t.$refs.scroll.setLoadStatus("no_more"):t.$refs.scroll.setLoadStatus("more")}}))},getLineList:function(){var t=this,i=[214,215,216,217];i.map((function(i,e){var n={channelIds:i,format:0,orderBy:5};t.indexRequest({url:"/content/list.jspx",data:n}).then((function(i){console.log(i),0==e?t.lineList1=i.data.body:1==e?t.lineList2=i.data.body:2==e?t.lineList3=i.data.body:t.lineList4=i.data.body,t.lineList.push(i.data.body)}))}))},onImageLoad:function(t){var i=this;return o(n.default.mark((function e(){var s,c,a,o;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=328,c=t.detail.width,a=t.detail.height+112,o=s*a/c,0==i.scenicListCount?setTimeout((function(){i.scenicLeftListHeight+=o,i.scenicListCount++,i.scenicRightList.push(i.scenicList[i.scenicListCount]),console.log(i.scenicList,i.scenicListCount,i.scenicRightList)}),300):(i.scenicListCount++,i.scenicLeftListHeight>i.scenicRightListHeight?i.scenicRightListHeight+=o:i.scenicLeftListHeight+=o,i.scenicListCount<i.scenicList.length&&(i.scenicLeftListHeight>i.scenicRightListHeight?i.scenicRightList.push(i.scenicList[i.scenicListCount]):i.scenicLeftList.push(i.scenicList[i.scenicListCount])));case 5:case"end":return e.stop()}}),e)})))()},todetail:function(i,e){t.navigateTo({url:"/pages/cate/scenic-spot?id="+i.id+"&&channelIds="+this.channelIds})},goDetail:function(i,e){var n="",s="";0==i?(s=214,this.lineList1.map((function(t){t.title==e&&(n=t.id)}))):1==i?(s=215,this.lineList2.map((function(t){t.title==e&&(n=t.id)}))):2==i?(s=216,this.lineList3.map((function(t){t.title==e&&(n=t.id)}))):(s=217,this.lineList4.map((function(t){t.title==e&&(n=t.id)}))),t.navigateTo({url:"/pages/cate/scenic-spot?id="+n+"&&channelIds="+s})}}};i.default=r}).call(this,e("543d")["default"])},"8fd4":function(t,i,e){"use strict";e.r(i);var n=e("8366"),s=e.n(n);for(var c in n)"default"!==c&&function(t){e.d(i,t,(function(){return n[t]}))}(c);i["default"]=s.a},c2fa:function(t,i,e){},e52a:function(t,i,e){"use strict";(function(t){e("41a1");n(e("66fd"));var i=n(e("82ab"));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])}},[["e52a","common/runtime","common/vendor"]]]);