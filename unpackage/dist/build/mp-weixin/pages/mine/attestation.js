(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/attestation"],{"23ae":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{form:{name:"",phone:"",ID_number:""},piece:0,imgList:["",""],authInfo:{phone:"",idCardBackImg:"",id:"",idCardImg:"",idNum:"",userId:"",realname:"",status:""}}},onLoad:function(){this.getStatus()},methods:{getStatus:function(){var t=this;this.homeRequest({url:"/authInfo",method:"GET",data:{}}).then((function(e){console.log(e),200==e.code&&1==e.body.status&&(t.authInfo=e.body,t.imgList=[t.authInfo.idCardImg,t.authInfo.idCardBackImg])}))},submit:function(){var e=this;if(this.authInfo.idNum&&this.checkIDCard(this.authInfo.idNum))if(1!=this.authInfo.status)if(0!=this.imgList[0].length&&0!=this.imgList[1].length){var n={phone:this.authInfo.phone,idCardBackImg:this.imgList[1],idCardImg:this.imgList[0],idNum:this.authInfo.idNum,realname:this.authInfo.realname,status:this.authInfo.status};this.homeRequest({url:"/authInfo/save",method:"POST",data:n}).then((function(n){if(console.log(n),200==n.code){var a=t.getStorageSync("user_info");a.isCertification=!0,t.setStorageSync("user_info",a),e.toast("资料提交成功，等待管理员审核")}else e.toast("保存失败","none")}))}else this.toast("照片不能为空!","none");else this.toast("认证审核已经通过,不能再次修改!","none");else this.toast("请输入正确的身份证号码!","none")},chooseOne:function(e){this.piece=e;var n=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var a=t.tempFilePaths[0];n.upload(a).then((function(t){console.log(t),n.imgList[e-1]=t.body.uploadPath,n.piece=0}))}})},checkIDCard:function(t){for(var e=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=["1","0","X","9","8","7","6","5","4","3","2"],a=t+"",i=t[17],o=a.substring(0,17),s=o.split(""),u=s.length,r=0,c=0;c<u;c++)r+=s[c]*e[c];var f=r%11,d=n[f],h=/^[1-9][0-9]{5}([1][9][0-9]{2}|[2][0][0|1][0-9])([0][1-9]|[1][0|1|2])([0][1-9]|[1|2][0-9]|[3][0|1])[0-9]{3}([0-9]|[X])$/,l=h.test(t);return!(i!==d||!l)}}};e.default=n}).call(this,n("543d")["default"])},"3d22":function(t,e,n){"use strict";n.r(e);var a=n("86ce"),i=n("e97e");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("9425");var s,u=n("f0c5"),r=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=r.exports},"5faf":function(t,e,n){"use strict";(function(t){n("41a1");a(n("66fd"));var e=a(n("3d22"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"86ce":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},9425:function(t,e,n){"use strict";var a=n("a8cd"),i=n.n(a);i.a},a8cd:function(t,e,n){},e97e:function(t,e,n){"use strict";n.r(e);var a=n("23ae"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a}},[["5faf","common/runtime","common/vendor"]]]);